
#include "pi.h"
#include "pi_lcd.h"

/** The sprite bank. */

#define PI_SPRITE_HIGH 16
#define PI_SPRITE_WIDE 960
static unsigned char __attribute__ ((progmem)) PI_SPRITE_BMP[] = {
  0b00111010, 0b01110010
, 0b01110001, 0b11101110
, 0b01101100, 0b11111110
, 0b01100000, 0b10011000
, 0b01101100, 0b11111110
, 0b01110001, 0b11101110
, 0b00111010, 0b01110010
, 0b00000000, 0b00000000
, 0b00111010, 0b01110001
, 0b01110001, 0b11101111
, 0b01101100, 0b11111111
, 0b01100000, 0b10011000
, 0b01101100, 0b11111100
, 0b01110001, 0b11011100
, 0b00111010, 0b11100100
, 0b00000000, 0b00000000
, 0b00111110, 0b00000000
, 0b01110011, 0b00000000
, 0b01110001, 0b11111111
, 0b01100000, 0b11101111
, 0b01101100, 0b11111011
, 0b01110001, 0b10000001
, 0b00111010, 0b00000000
, 0b00000100, 0b00000000
, 0b00111110, 0b00000110
, 0b01110011, 0b11111111
, 0b01110001, 0b11101110
, 0b01100000, 0b11111100
, 0b01101100, 0b11111110
, 0b01110001, 0b01010111
, 0b00111010, 0b00110011
, 0b00000100, 0b00000001
, 0b00111010, 0b01110100
, 0b01111101, 0b11101110
, 0b01101110, 0b11111110
, 0b01011110, 0b01111000
, 0b01111110, 0b11111110
, 0b01111101, 0b11101110
, 0b00111010, 0b01110100
, 0b00000000, 0b00000000
, 0b00111010, 0b01110010
, 0b01111101, 0b11101111
, 0b01101110, 0b11111111
, 0b01011110, 0b01111000
, 0b01111110, 0b11111100
, 0b01111101, 0b11101100
, 0b00111010, 0b01110100
, 0b00000000, 0b00000000
, 0b00110101, 0b11110010
, 0b01101110, 0b11101110
, 0b01010011, 0b01111110
, 0b01011111, 0b00011000
, 0b01010011, 0b01111110
, 0b01101110, 0b11101110
, 0b00110101, 0b11110010
, 0b00000000, 0b00000000
, 0b00110101, 0b11110001
, 0b01101110, 0b11101111
, 0b01010011, 0b01111111
, 0b01011111, 0b00011000
, 0b01010011, 0b01111100
, 0b01101110, 0b11011100
, 0b00110101, 0b11100100
, 0b00000000, 0b00000000
, 0b00110010, 0b00000000
, 0b01101101, 0b00000000
, 0b01101110, 0b11111111
, 0b01010011, 0b11101111
, 0b01011111, 0b11111011
, 0b01101110, 0b00000001
, 0b00110100, 0b00000000
, 0b00000000, 0b00000000
, 0b00110010, 0b00000110
, 0b01101101, 0b11111111
, 0b01101110, 0b11101110
, 0b01010011, 0b11111100
, 0b01011111, 0b11111110
, 0b01101110, 0b01010111
, 0b00110100, 0b00110011
, 0b00000000, 0b00000001
, 0b00111100, 0b01110100
, 0b01111010, 0b11101110
, 0b01101101, 0b11111110
, 0b01011111, 0b11111000
, 0b01011111, 0b11111110
, 0b01111110, 0b11101110
, 0b00111100, 0b01110100
, 0b00000000, 0b00000000
, 0b00111100, 0b01110010
, 0b01111010, 0b11101111
, 0b01101101, 0b11111111
, 0b01011111, 0b11111000
, 0b01011111, 0b11111100
, 0b01111110, 0b11101100
, 0b00111100, 0b01110100
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00111110, 0b00000000
, 0b01110011, 0b10000000
, 0b01101101, 0b11111111
, 0b01011110, 0b11101101
, 0b01110011, 0b11111010
, 0b01011111, 0b00000001
, 0b00111110, 0b00000000
, 0b00000100, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000
, 0b00000000, 0b00000000

};


static uint8_t cursor_x, cursor_y, textsize, textcolor;
static int8_t din_, sclk_, dc_, rst_, cs_;

void pi_lcd_open(int8_t sclk, int8_t din, int8_t dc, int8_t cs, int8_t rst) {
  din_   = din;
  sclk_  = sclk;
  dc_    = dc;
  rst_   = rst;
  cs_    = cs;
  cursor_x = cursor_y = 0;
  textsize = 1;
  textcolor = BLACK;
}

static void pi_lcd_out(uint8_t c) {
  PI_SHIFT_OUT(din_, sclk_, MSBFIRST, c);
}

static void pi_lcd_outrev(uint8_t c) {
  PI_SHIFT_OUT(din_, sclk_, LSBFIRST, c);
}

void pi_lcd_command(uint8_t c) {
  PI_DIGITAL_OUT(dc_, LOW);
  pi_lcd_out(c);
}

void pi_lcd_data(uint8_t c) {
  PI_DIGITAL_OUT(dc_, HIGH);
  // reverse byte order for output since that maskes the use of 0bxxxxxxxx constants easier.
  pi_lcd_outrev(c);
}



// Get into the EXTENDED mode!
void pi_lcd_extended_mode(void) {
  pi_lcd_command(PI_LCD_FUNCTIONSET | PI_LCD_EXTENDEDINSTRUCTION );
}

// Get into the NORMAL mode!
inline void pi_lcd_normal_mode(void) {
  pi_lcd_command(PI_LCD_FUNCTIONSET);
}

/** Sets the contrast of the screen by asjusting the VOP and the bias of the lcd. */
void pi_lcd_contrast_(uint8_t contrast) {
  if (contrast > 0x7f) {  contrast = 0x7f; }
  pi_lcd_extended_mode();
  pi_lcd_command(PI_LCD_SETBIAS | 0x4);     // Set the bias to 4 which seems best?
  pi_lcd_command(PI_LCD_SETVOP  | contrast); // Experimentally determined  
  pi_lcd_normal_mode();
}


void pi_lcd_init(uint8_t contrast) {
  // set pins to output mode
  PI_PIN_MODE(din_, OUTPUT);
  PI_PIN_MODE(sclk_, OUTPUT);
  PI_PIN_MODE(dc_, OUTPUT);
  PI_PIN_MODE(rst_, OUTPUT);
  PI_PIN_MODE(cs_, OUTPUT);

  // toggle RST low to reset; CS low so it'll listen to us
  if (cs_ > 0)  PI_DIGITAL_OUT(cs_, LOW);
  PI_DIGITAL_OUT(rst_, LOW);
  _delay_ms(500);
  PI_DIGITAL_OUT(rst_, HIGH);
  pi_lcd_contrast_(contrast);
  
  // Set display to normal mode.
  pi_lcd_normal();
}

void pi_lcd_setyaddr(uint8_t p) { 
  pi_lcd_command(PI_LCD_SETYADDR | p);
}

void pi_lcd_setxaddr(uint8_t p) { 
  pi_lcd_command(PI_LCD_SETXADDR | p);
}



void pi_lcd_invert(void) {  
  pi_lcd_command(PI_LCD_DISPLAYCONTROL | PI_LCD_DISPLAYINVERT);
}


void pi_lcd_allon(void) {  
  pi_lcd_command(PI_LCD_DISPLAYCONTROL | PI_LCD_DISPLAYALLON);
}

void pi_lcd_normal(void) {  
  pi_lcd_command(PI_LCD_DISPLAYCONTROL | PI_LCD_DISPLAYNORMAL);
}

void pi_lcd_clear(void) {
  int x, y;
  pi_lcd_setxaddr(0);
  pi_lcd_setyaddr(0);
  for (x = 0 ; x < PI_LCD_WIDE; x++) {
    for(y = 0; y < PI_LCD_COLHIGH; y++) {
      pi_lcd_data(0);
    }      
  }
}  

void pi_lcd_flush(void) { 
  // Needed to flush the sent bytes and finish the data communication.
  pi_lcd_command(PI_LCD_SETYADDR );  
}    


/** This will draw one column of pixels. Because of the structure of the display, 
* y is the the *row* coordinate, not the pixelwide Y coordinate, however,
* X *is* the pixel coordinate.
*/
void pi_lcd_setone(uint8_t x, uint8_t y, uint8_t pixels) {
  pi_lcd_setyaddr(y);
  pi_lcd_setxaddr(x);
  pi_lcd_data(pixels);
}

/** This will draw one column of pixels, combining it with a preexisting column, previous.
* In this case, y is the real Y coordinate, not the row coordinate. Pixel coorinates are emulating 
* by shift and combine operations.
* Returns the upper byte blitted, which may be used on a next call of this function to preserve 
* what the first call has drawn.
*/
uint8_t pi_lcd_blitone(uint8_t x, uint8_t y, uint8_t pixels, uint8_t previous) {
  register uint8_t    row     = y / 8;
  register uint8_t    shift   = y % 8;
  register uint16_t   realpix = pixels;  
  if(!pixels) return pixels;
  realpix                   <<= ( 8 - shift);  // shift the pixel up as much is needed
  realpix                    |= previous << 8; 
  register uint8_t    low     = (uint8_t)(realpix & 255); // extract bottom part
  register uint8_t    high    = (uint8_t)(realpix >>  8); // extract top part
  pi_lcd_setone(x, row, high); // high contains the top part of the pixel column
  if(shift)  pi_lcd_setone(x, row + 1, low);
  // draw bottom part only if needed  
  return high;
}

/** Helper function that will shift the pixel in pixel p by shift and combine it with combine, and then return the  */


/** This will draw one column of amount*8 pixels. In this case, y is the real Y coordinate, not the row coordinate. 
* Pixel coordinates are emulated by shifting the bits around combine. Amount can be at most 8.
*/
void pi_lcd_blitcolumn(int8_t x, int8_t y, int8_t amount, uint8_t * pixels) {
  register uint8_t    row     = y / 8;
  register uint8_t    shift   = y % 8;
  register uint64_t   aid     = 0;
  register int        index;
  register uint8_t    data    = 0;
  for (index = 0; index < amount; index ++) {
    aid |= (pixels[amount - index - 1] << (index*8));
  }
  aid  <<= (8-shift);
  for (index = 0; index < amount; index ++) {
    // data = pixels[index]; 
    data = (aid >> ((amount - index - 1)*8)) & 255;
    pi_lcd_setone(x, row + index, data);
  }
}


/** Draws a bitmap (from program memory) in a primitive sort of way. */
void pi_lcd_rawblit_p(uint8_t x, uint8_t y, const uint8_t *bitmap, uint8_t w, uint8_t h, uint8_t color) {
  int8_t xx, yy;
  for (xx=0; xx < w; xx++ ) {  
    for (yy=0; yy < (h/8); yy++) {
      uint16_t dif = yy + (xx*(h/8));
      uint8_t  byt = pgm_read_byte(bitmap + dif); 
      pi_lcd_setone(xx + x, yy + (y/8), byt);
    }
  }
  pi_lcd_flush();
}

/** Draws a bitmap (from program memory). */
void pi_lcd_blit_p(int8_t x, int8_t y, const uint8_t *bitmap, int8_t w, int8_t h, uint8_t color) {
  int8_t  rows = h/8;
  uint8_t pixels[8];
  int8_t xx, yy;
  for (xx=0; xx < w; xx++ ) {
    for (yy=0; yy < rows; yy++) {
      uint16_t dif = yy + (xx*rows);
      pixels[yy]   = pgm_read_byte(bitmap + dif); 
      /* 
      uint8_t  byt = pgm_read_byte(bitmap + dif); 
      previous     = pi_lcd_blitone(xx + x, yy + y, byt, previous);
      */
    }
    pi_lcd_blitcolumn(xx + x, y, rows, pixels);
  }
  pi_lcd_flush();
}


void pi_lcd_putc(uint8_t x, uint8_t y, char c) {
  // Draw nothing if not available. We only see a lmited range of ASCII characters, from ! to tilde
  if ((c < 33) || (c > 126)) { return; }
  c -= 33; // Font begins with ! character
  uint8_t * bitmap = PI_FONT_BMP + (c * PI_FONT_WIDE);
  pi_lcd_blit_p(x, y, bitmap, PI_FONT_WIDE, PI_FONT_HIGH, BLACK);  
}

void pi_lcd_puts(uint8_t x, uint8_t y, char * c) {
  for(; *c != '\0'; c++) {
    pi_lcd_putc(x, y, *c);
    x += PI_FONT_WIDE;
  }
}

void pi_lcd_puts_p(uint8_t x, uint8_t y, char * c) {
  char b = 1;
  for(; b != '\0'; c++, b = pgm_read_byte(c) ) {
    char b = pgm_read_byte(c); 
    pi_lcd_putc(x, y, b);
    x += PI_FONT_WIDE;
  }
}

// draws a sprite at the given location
void pi_lcd_putsprite(uint8_t x, uint8_t y, uint8_t index) {
  uint8_t * bitmap = PI_SPRITE_BMP + (index * 8);
  pi_lcd_blit_p(x, y, bitmap, 8, 16, BLACK);  
}


